<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Automating my in-floor heating - intro · Fuzz Notes
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Fuzz">
<meta name="description" content="Introduction to automating my floor heat">
<meta name="keywords" content="iot,home automation,blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Automating my in-floor heating - intro">
  <meta name="twitter:description" content="Introduction to automating my floor heat">

<meta property="og:url" content="http://localhost:1313/posts/iot-floor-heat-intro/">
  <meta property="og:site_name" content="Fuzz Notes">
  <meta property="og:title" content="Automating my in-floor heating - intro">
  <meta property="og:description" content="Introduction to automating my floor heat">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-03-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-03-01T00:00:00+00:00">
    <meta property="article:tag" content="Floor Heat">
    <meta property="article:tag" content="IOT">




<link rel="canonical" href="http://localhost:1313/posts/iot-floor-heat-intro/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      Fuzz Notes
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Posts</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/iot-floor-heat-intro/">
              Automating my in-floor heating - intro
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2025-03-01T00:00:00Z">
                March 1, 2025
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              3-minute read
            </span>
          </div>
          
          
          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/floor-heat/">Floor Heat</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/iot/">IOT</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <p>I remember hearing <a href="https://en.wikipedia.org/wiki/Tony_Fadell"  class="external-link" target="_blank" rel="noopener">Tony Fadell</a> talk about his vision of replacing
all of the dumb white boxes around your house when he started Nest. At least he managed to do a good job with
the thermostat (and an ok job with smoke detectors) before riding off into the sunset.</p>
<h2 id="the-problem">
  The problem
  <a class="heading-link" href="#the-problem">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>We have in-floor heating in a few of our bathrooms which were controlled by dumb white boxes. These boxes were:</p>
<ul>
<li>rather expensive</li>
<li>didn&rsquo;t have any wifi connectivity or ability to control them remotely</li>
<li>had clocks that would drift from the actual time and need to be adjusted regularly</li>
<li>didn&rsquo;t account for daylight savings</li>
<li>would forget their scheduled programming if the power was out for more than a few minutes</li>
<li>didn&rsquo;t know if we were home or away so we manually turned them OFF before leaving</li>
<li>didn&rsquo;t have any ability to report energy usage</li>
</ul>
<p>Yes, there probably are some more modern implementations available that solve some of these problems but they
usually come with their own cloud service and app. I&rsquo;d prefer to be able to centrally control and manage these
via my own <a href="https://www.home-assistant.io/"  class="external-link" target="_blank" rel="noopener">home automation system</a> along with everything else in my home. And hey -
it&rsquo;s a fun problem to solve.</p>
<h2 id="in-floor-heat-sensors">
  In-Floor Heat Sensors
  <a class="heading-link" href="#in-floor-heat-sensors">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The first thing I wanted to understand was how these thermostats and sensors work.
In floor heating systems typically have a sensor embedded in the floor during installation. These sensors are
usually 10k NTC sensors (aka <a href="https://en.wikipedia.org/wiki/Thermistor"  class="external-link" target="_blank" rel="noopener">Thermistors</a>) that have a varying
resistance at different temperatures. If you know the resistance at 3 different temperatures you can use the
<a href="https://en.wikipedia.org/wiki/Steinhart%E2%80%93Hart_equation"  class="external-link" target="_blank" rel="noopener">Steinhard-Hart equation</a>
to calculate the sensor&rsquo;s temperature at any resistance.</p>
<p>I used my existing thermostat to get the floor temperature to 3 different points and then used a multi-meter to
test the resistance of the sensors so I could later calibrate my replacement controller. Measuring the resistance
is simple - just turn off the breaker to the thermostat, find the sensor wires where they attach to the thermostat,
detach them and measure the resistance across the two wires of the sensor.</p>
<h2 id="iot-device-choices">
  IOT Device Choices
  <a class="heading-link" href="#iot-device-choices">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>To replace my thermostat I needed to find a device that could measure the floor sensor&rsquo;s resistance to determine the
current temperature and compare it to a desired target temperature. It would then need to turn ON/OFF power to the
resistive heating element until the target temperature is reached. I wanted a device that was suitable for
putting in a electrical box in the wall where the current thermostat, power, and sensor wire were all located.
I also wanted to avoid any USB powered device that required an additional line power to USB transformer.
Luckily Shelly makes great devices like the <a href="https://us.shelly.com/products/shelly-1pm-gen3"  class="external-link" target="_blank" rel="noopener">Shelly 1PM</a> that are powered
by line voltage, suitable for putting in a wall box, WiFi controllable, and have an in-line relay. They also can be
connected to a <a href="https://us.shelly.com/products/shelly-plus-add-on"  class="external-link" target="_blank" rel="noopener">Shelly Plus Add-On</a> which can be used to integrate
with the NTC sensor.</p>
<h2 id="next">
  Next
  <a class="heading-link" href="#next">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>In the next post we will talk about
<a href="/posts/iot-floor-heat-wiring" >how to wire these devices to the LINE, LOAD, and SENSOR</a>.</p>

      </div>


      <footer>
        


        
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2025
     Fuzz 
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
